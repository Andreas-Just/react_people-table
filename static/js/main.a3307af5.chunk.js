(this["webpackJsonpreact_people-table"]=this["webpackJsonpreact_people-table"]||[]).push([[0],{194:function(e,a,t){e.exports=t(345)},199:function(e,a,t){},316:function(e,a,t){},317:function(e,a,t){},318:function(e,a,t){},335:function(e,a,t){},336:function(e,a,t){},337:function(e,a,t){},338:function(e,a,t){},339:function(e,a,t){},340:function(e,a,t){},341:function(e,a,t){},343:function(e,a,t){},344:function(e,a,t){},345:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),o=t(48),l=t.n(o),c=t(34),s=t(91),u=t(19),i=t(36),m=t(17),d=t(162),p=t.n(d),f=t(362),b=t(355),h=(t(199),50),g=/[^a-z ]/gi,v=function(e){var a=e.query,t=e.setQuery,n=e.applyQuery;return r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{inverted:!0,color:"teal",className:"Nav"},r.a.createElement(f.a.Item,{as:c.b,name:"home",to:"/",exact:!0}),r.a.createElement(f.a.Item,{as:c.b,name:"people",to:"/people",exact:!0}),r.a.createElement(f.a.Item,{as:c.b,name:"add person",to:"/add-person",exact:!0}),r.a.createElement(m.b,{path:"/people"},r.a.createElement(f.a.Item,{position:"right"},r.a.createElement(b.a,{className:"Nav-Search icon",placeholder:"Search...",icon:"search",size:"mini",value:a,onChange:function(e){var a=e.target,r=g,o=h,l=a.value.replace(r,"").replace(/\s{2,}/g," ").slice(0,o);t(l),n(l)}})))))},E=t(363),N=t(364),P=(t(316),function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"HomePage"},r.a.createElement(E.a,{className:"HomePage-Wrapper"},r.a.createElement(N.a,{content:"Welcome to the People Table project!",className:"HomePage-Header",size:"huge",color:"teal"}),r.a.createElement(N.a,{className:"HomePage-Text",size:"large",color:"teal"},"Here you can download and view the list of people in the form of a table, as well as select a specific person, sort people in each column in ascending and descending order. To store and control the state of the application, use the History API."))))}),j=t(29),O=t(4),y=t.n(O),S=t(358),x=t(41),C=(t(317),function(e){var a=e.person,t=e.tableHeaders,n=e.onSelect;return r.a.createElement(r.a.Fragment,null,t.map((function(e){var t=e.code;return r.a.createElement(S.a.Cell,{className:y()("TableCells",{TableCells_centenarians:a[t]>=65&&"age"===t,TableCells_aborigine:a.born<=1650&&"name"===t}),key:t,content:a[t],onClick:function(){return n(t,a)}})})))}),F=t(359),w=t(365),A=(t(318),[{key:1,text:"5 people",value:5},{key:2,text:"10 people",value:10},{key:3,text:"20 people",value:20},{key:4,text:"50 people",value:50}]),T=function(e){var a=e.page,t=e.perPage,n=e.totalPages,o=e.onSelectPage,l=e.onSelectPerPage;return r.a.createElement(S.a.HeaderCell,{colSpan:"10",className:"Pagination"},r.a.createElement(F.a,{placeholder:"Select people per page",pointing:"top",floated:"left",selection:!0,name:"perPage",value:t,onChange:l,options:A}),1!==n&&r.a.createElement(w.a,{floated:"right",activePage:a,onPageChange:o,ellipsisItem:{content:r.a.createElement(x.a,{name:"ellipsis horizontal"}),icon:!0},prevItem:{content:r.a.createElement(x.a,{name:"angle left"}),disabled:1===a,icon:!0},firstItem:{content:r.a.createElement(x.a,{name:"angle double left"}),disabled:1===a,icon:!0},nextItem:{content:r.a.createElement(x.a,{name:"angle right"}),disabled:a===n,icon:!0},lastItem:{content:r.a.createElement(x.a,{name:"angle double right"}),disabled:a===n,icon:!0},totalPages:n}))},k=(t(335),r.a.memo((function(e){var a=e.path,t=e.page,n=e.perPage,o=e.totalPages,l=e.people,c=e.sortedBy,s=e.isSortedAsc,u=e.tableHeaders,i=e.onSortTable,m=e.onSelectPerson,d=e.onSelectPage,p=e.onSelectPerPage;return r.a.createElement(S.a,{className:"PeopleTable",fixed:!0,basic:!0,celled:!0,color:"teal",inverted:!0},r.a.createElement(S.a.Header,{className:"PeopleTable-TableHeader"},r.a.createElement(S.a.Row,{className:"PeopleTable-TableRow"},u.map((function(e){var a=e.name,t=e.code;return r.a.createElement(S.a.HeaderCell,{key:t,className:y()(Object(j.a)({"PeopleTable-HeaderCell":!0},"PeopleTable-HeaderCell_".concat(t),!0)),onClick:function(){return i(t)}},c===t&&r.a.createElement(x.a,{name:s?"arrow circle down":"arrow circle up",className:"PeopleTable-Icon"}),a)})))),r.a.createElement(S.a.Body,{className:"PeopleTable-TableBody"},l.map((function(e){return r.a.createElement(S.a.Row,{key:e.id,active:e.slug===a,className:y()({"PeopleTable-TableRow":!0,"PeopleTable-TableRow_male":"m"===e.sex,"PeopleTable-TableRow_female":"f"===e.sex})},r.a.createElement(C,{person:e,tableHeaders:u,onSelect:m}))}))),r.a.createElement(S.a.Footer,{className:"PeopleTable-TableFooter"},r.a.createElement(S.a.Row,{className:"PeopleTable-TableRow"},r.a.createElement(T,{page:t,perPage:n,totalPages:o,onSelectPage:d,onSelectPerPage:p}))))}))),H=(t(336),{id:"Id",name:"Name",sex:"Sex",age:"Age",born:"Born",died:"Died",century:"Century",fatherName:"Father",motherName:"Mother",children:"Children"}),B=r.a.memo((function(e){var a=e.people,t=e.historyPush,o=Object(m.h)(),l=Object(m.i)().personName,c=new URLSearchParams(o.search),u=Number(c.get("page"))||1,d=Number(c.get("perPage"))||5,p="desc"!==c.get("sortOrder"),f=c.get("sortBy")||"id",b=function(e){return 0===e.length?[{name:"There are no people",code:""}]:Object.entries(H).map((function(e){var a=Object(i.a)(e,2);return{code:a[0],name:a[1]}}))}(a),h=Object(n.useMemo)((function(){var e=function(e){switch(e){case"id":case"age":case"born":case"died":case"century":return function(a,t){return a[e]-t[e]};case"name":case"sex":case"fatherName":case"motherName":case"children":return function(a,t){return a[e].localeCompare(t[e])};default:return function(){return 0}}}(f),t=Object(s.a)(a).sort(e);return p||t.reverse(),t}),[a,f,p]),g=Object(n.useMemo)((function(){var e=Math.ceil(h.length/d);return a.length&&u>e&&t({page:"1",perPage:"5"},l),e}),[u,d,h,l,a,t]),v=(u-1)*d,E=Object(n.useMemo)((function(){return h.slice(v,v+d)}),[h,v,d]);l&&!a.some((function(e){return e.slug===l}))&&t({},"");return r.a.createElement("div",{className:"PeoplePage"},r.a.createElement(N.a,{content:"People table",className:"App-Header",size:"huge",color:"teal"}),r.a.createElement(k,{tableHeaders:b,people:E,sortedBy:f,isSortedAsc:p,totalPages:g,page:u,perPage:d,path:l,onSortTable:function(e){t(f!==e?{sortBy:e,sortOrder:"asc"}:{sortOrder:p?"desc":"asc"},l)},onSelectPerson:function(e,n){var r,o=null===(r=a.find((function(a){return a.name===n[e]})))||void 0===r?void 0:r.slug;"name"===e&&t({},n.slug),o&&("motherName"===e||"fatherName"===e)&&t({},o)},onSelectPage:function(e,a){var n=a.activePage;t({page:String(n)},l)},onSelectPerPage:function(e,a){var n=a.name,r=a.value,o=Object(j.a)({},n,String(r));t(o,l)}}))})),I=t(356),_=t(346),M=(t(337),[{key:"male",text:"Male",value:"m"},{key:"female",text:"Female",value:"f"}]),q=function(e){var a=e.id,t=e.name,o=e.value,l=e.label,c=e.born,s=void 0===c?"":c,u=e.people,i=void 0===u?[]:u,m=e.placeholder,d=void 0===m?"":m,p=e.error,f=void 0===p?"":p,b=e.onChange,h=e.onBlur,g=void 0===h?function(){}:h,v=null===i||void 0===i?void 0:i.reduce((function(e,a){return"m"===a.sex&&a.born<+s&&a.died>+s&&e.push({key:String(a.id),text:a.name,value:a.name}),e}),[]),E=null===i||void 0===i?void 0:i.reduce((function(e,a){return"f"===a.sex&&a.born<+s&&a.died>+s&&e.push({key:String(a.id),text:a.name,value:a.name}),e}),[]),N=Object(n.useMemo)((function(){return"fatherName"===t?v:"motherName"===t?E:M}),[t,v,E]);return r.a.createElement(r.a.Fragment,null,"sex"===t||"fatherName"===t||"motherName"===t?r.a.createElement(I.a.Select,{className:y()({"FormField-Select":!0,"FormField-Select_gender":"sex"===t}),width:12,text:"fatherName"!==t&&"motherName"!==t||s?"":"Enter year of birth",options:N,error:!!f&&{content:f},disabled:("fatherName"===t||"motherName"===t)&&!s,id:a,name:t,label:l,placeholder:d,value:o,onChange:b,onBlur:g}):r.a.createElement(I.a.Input,{className:"FormField-Input",width:"born"===t||"died"===t?6:12,error:!!f&&{content:f},disabled:"died"===t&&!s,id:a,name:t,label:l,placeholder:d,value:o,onChange:b,onBlur:g}))},L=t(360),z=(t(338),function(e){var a=e.fieldName;return r.a.createElement(L.a,{className:"Message",warning:!0,header:"Warning!",content:'\n      Fields of the form: "'.concat(a,'", must be filled out.\n      All form fields must be filled in correctly.\n    ')})}),R=function(e){var a=e.isValid,t=e.required;return r.a.createElement(L.a,{className:"Message",success:a&&t,header:"Success!",content:"All form fields are filled in correctly."})},G=t(181),D=function(e,a){return a?"":"".concat(e," is required")},Q=function(e,a){return+a<1400||+a>(new Date).getFullYear()?"".concat(e," is valid only between 1400 and the current year"):""},Y=function(e,a){return Object(G.a)(/^((.*\.[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF])*(([A-Z][a-z]+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)+)([\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF])(.*)(([A-Z]\.?[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF])*)([A-Z]['\x2DA-Za-z]+))?$/,{title:2,firstname:3,suffix:6,middleinitial:7,lastname:9}).test(a)?"":"".concat(e," must be valid")},Z=function(e){return function(a,t){return!t||t.length>=e?"":"".concat(a," should have at least ").concat(e," characters")}},J=(t(339),60),U=4,W=/[^a-z, ]/gi,V=/[^0-9]/g,$=[{name:"name",label:"Full name",placeholder:"Enter full name",validators:[D,Y,Z(2)]},{name:"born",label:"Year of birth",placeholder:"Enter year of birth",validators:[D,Q]},{name:"died",label:"Year of death",placeholder:"Enter the year of death",validators:[D,Q,function(e,a,t){return t&&+a-+t<=150&&+a>=+t?"":"".concat(e," must not be less than or exceed the year of birth by more than 150 years")}]},{name:"sex",label:"Gender",placeholder:"Choose gender",validators:[D]},{name:"fatherName",label:"Person\u2019s father",placeholder:"Choose the father\u2019s full name",validators:[Y,Z(2)]},{name:"motherName",label:"Person\u2019s mother",placeholder:"Choose the mother\u2019s full name",validators:[Y,Z(2)]},{name:"children",label:"Person\u2019s children",placeholder:"Enter the person\u2019s children",validators:[Y,Z(2)]}],K=$.map((function(e){return e.validators.some((function(e){return"required"===e.name}))?e.name:""})).filter(Boolean),X=$.map((function(e){return e.validators.some((function(e){return"required"===e.name}))?e.label:""})).filter(Boolean).join(", "),ee={name:"",born:"",died:"",sex:"",fatherName:"",motherName:"",children:""},ae={name:"",born:"",died:"",sex:"",fatherName:"",motherName:"",children:""},te=function(e){var a=e.people,t=e.addPerson,o=Object(n.useState)(ee),l=Object(i.a)(o,2),c=l[0],s=l[1],m=Object(n.useState)(ae),d=Object(i.a)(m,2),p=d[0],f=d[1],b=Object(n.useCallback)((function(e){return!Object.values(e).some(Boolean)}),[]),h=Object(n.useMemo)((function(){return K.every((function(e){return!!e&&Boolean(c[e])}))}),[c]),g=function(e,a,t){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=$.find((function(a){return a.name===e}));if(!r)throw new Error('Unknown field "'.concat(e,'"'));var o=r.validators,l=void 0===o?[]:o;return l.map((function(e){return e(t,a,n)})).filter(Boolean).join(", ")},v=function(e,a){var t=a.name,n=a.value;if(e.target){var r,o=W,l=V,c=J,i=U;r="born"===t||"died"===t?n.replace(l,"").slice(0,i):n.replace(o,"").replace(/\s{2,}/g," ").slice(0,c),s((function(e){return Object(u.a)(Object(u.a)({},e),{},Object(j.a)({},t,r))}))}},E=function(e){var a=e.target.name,t=e.target.id;switch(t){case"Gender":f((function(e){return Object(u.a)(Object(u.a)({},e),{},{sex:D(t,c.sex)})}));break;case"Person\u2019s father":f((function(e){return Object(u.a)(Object(u.a)({},e),{},{fatherName:Y(t,c.fatherName)})}));break;case"Person\u2019s mother":f((function(e){return Object(u.a)(Object(u.a)({},e),{},{motherName:Y(t,c.motherName)})}));break;case"Year of death":f((function(e){return Object(u.a)(Object(u.a)({},e),{},Object(j.a)({},a,g(a,c[a],t,c.born)))}));break;default:f((function(e){return Object(u.a)(Object(u.a)({},e),{},Object(j.a)({},a,g(a,c[a],t)))}))}},P=b(p);return r.a.createElement("div",{className:"AddPerson"},r.a.createElement(N.a,{content:"Form to add a new person",className:"App-Header AddPerson-Header",size:"huge",color:"teal"}),r.a.createElement(I.a,{className:"AddPerson-Form",warning:!0,success:P&&h,onSubmit:function(e){e.preventDefault();var a=Object(u.a)({},ae);$.forEach((function(e){var t=e.name,n=e.label;a[t]=g(t,c[t],n,c.born)})),b(a)?(t(c),s(ee),f(ae)):f(a)}},r.a.createElement(I.a.Group,{className:"AddPerson-FormGroup"},$.map((function(e){var t=e.name,n=e.label,o=e.placeholder;return"born"===t||"died"===t?r.a.createElement(q,{key:t,id:n,name:t,label:n,born:c.born,placeholder:o,value:c[t],error:p[t],onChange:v,onBlur:E}):r.a.createElement(I.a.Group,{className:"AddPerson-FormField",key:t},r.a.createElement(q,{id:n,name:t,label:n,born:c.born,people:a,placeholder:o,value:c[t],error:p[t],onChange:v,onBlur:E}))}))),r.a.createElement(I.a.Group,{className:"AddPerson-FormGroup"},P&&h?r.a.createElement(R,{isValid:P,required:h}):r.a.createElement(z,{fieldName:X})),r.a.createElement(I.a.Group,{className:"AddPerson-FormGroup"},r.a.createElement(_.a,{className:"AddPerson-Button",content:"Add Person",color:"teal"}))))},ne=function(e){var a=e.message;return r.a.createElement("h2",null,a)},re=(t(340),function(e){var a=e.people,t=e.historyPush,n=e.addPerson;return r.a.createElement("div",{className:"Main"},r.a.createElement(m.d,null,r.a.createElement(m.b,{path:"/add-person",render:function(){return r.a.createElement(te,{people:a,addPerson:n})}}),r.a.createElement(m.b,{path:"/people/:personName?",render:function(){return r.a.createElement(B,{people:a,historyPush:t})}}),r.a.createElement(m.b,{path:"/",exact:!0},r.a.createElement(P,null)),r.a.createElement(m.a,{from:"/home",to:"/"}),r.a.createElement(m.b,{path:"/error"},r.a.createElement(ne,{message:"Not found"})),r.a.createElement(m.a,{from:"/*",to:"/error"})))}),oe=(t(341),function(){return r.a.createElement("div",{className:"Spinner"},r.a.createElement("h2",{className:"Spinner-TextInfo"},"Loa",r.a.createElement("span",{className:"Spinner-D"},"d"),"ing..."),r.a.createElement("div",{className:"Spinner-Circle"},r.a.createElement("span",{className:"Spinner-Line"}),r.a.createElement("span",{className:"Spinner-Line"}),r.a.createElement("span",{className:"Spinner-Line"}),r.a.createElement("span",{className:"Spinner-Line"})))}),le=t(67),ce=t.n(le),se=t(122),ue=function(){var e=Object(se.a)(ce.a.mark((function e(a){var t;return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(a);case 2:return t=e.sent,e.abrupt("return",t.json());case 4:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),ie=function(){var e=Object(se.a)(ce.a.mark((function e(){var a;return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ue("".concat("https://andreas-just.github.io/library-json").concat("/people/people-slug.json"));case 2:return a=e.sent,e.abrupt("return",a.map((function(e,t){return Object(u.a)(Object(u.a)({},e),{},{id:t+1,fatherName:e.fatherName||"",motherName:e.motherName||"",age:e.died-e.born,century:Math.ceil(e.died/100),children:a.filter((function(a){return a.fatherName===e.name||a.motherName===e.name})).map((function(e){return e.name})).join(", ")||""})})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),me=(t(343),t(344),function(){return r.a.createElement("div",{className:"Hero"},r.a.createElement("div",{className:"Cube Cube_gradient"}),r.a.createElement("div",{className:"Cube Cube_gradient"}),r.a.createElement("div",{className:"Cube Cube_gradient"}),r.a.createElement("div",{className:"Cube Cube_gradient"}),r.a.createElement("div",{className:"Cube Cube_gradient"}),r.a.createElement("div",{className:"Cube Cube_gradient"}),r.a.createElement("div",{className:"Cube Cube_gradient"}))}),de=function(){var e=Object(n.useState)([]),a=Object(i.a)(e,2),t=a[0],o=a[1],l=Object(n.useState)(0),c=Object(i.a)(l,2),d=c[0],f=c[1],b=Object(n.useState)(""),h=Object(i.a)(b,2),g=h[0],E=h[1];Object(n.useEffect)((function(){ie().then((function(e){o(e),f(e.length+1)}))}),[]);var N=Object(m.g)(),P=Object(m.h)(),j=Object(m.i)().personName,O=new URLSearchParams(P.search),y=O.get("query")||"",S=function(e,a){var t=Object(u.a)(Object(u.a)({},Object.fromEntries(O.entries())),e),n=a||"";for(var r in t)O.set(r,t[r]);N.push({pathname:"/people/".concat(n),search:O.toString()})};Object(n.useEffect)((function(){E(y)}),[y]);var x=Object(n.useCallback)(p()((function(e){""!==e?S({query:e},j):(O.delete("query"),S({},j))}),2e3),[]),C=y.toLowerCase(),F=Object(n.useMemo)((function(){return t.filter((function(e){return e.name.toLowerCase().includes(C)}))}),[C,t]);return t.length?r.a.createElement("div",{className:"App"},r.a.createElement(v,{query:g,setQuery:E,applyQuery:x}),r.a.createElement(re,{people:F,historyPush:S,addPerson:function(e){var a=e.name,n=e.born,r=e.died,l=e.sex,c=e.fatherName,u=e.motherName,i=e.children,m=+r-+n,p=+r%100===0?+r/100:Math.ceil(+r/100),b="".concat(a.toLowerCase().split(" ").join("-"),"-").concat(n),h={name:a,sex:l,age:m,born:+n,died:+r,century:p,fatherName:c,motherName:u,children:i,slug:b,id:d};o([].concat(Object(s.a)(t),[h])),f(d+1),S({sortBy:"name",sortOrder:"asc",perPage:"10",query:a.slice(0,2).toLowerCase()},b)}}),r.a.createElement("footer",{className:"App-Footer"},"\xa9Andreas Just 2020"),r.a.createElement(me,null)):r.a.createElement(oe,null)};l.a.render(r.a.createElement(c.a,null,r.a.createElement(de,null)),document.getElementById("root"))}},[[194,1,2]]]);
//# sourceMappingURL=main.a3307af5.chunk.js.map