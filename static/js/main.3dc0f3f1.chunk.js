(this["webpackJsonpreact_people-table"]=this["webpackJsonpreact_people-table"]||[]).push([[0],{187:function(e,a,t){e.exports=t(334)},192:function(e,a,t){},309:function(e,a,t){},310:function(e,a,t){},311:function(e,a,t){},329:function(e,a,t){},330:function(e,a,t){},331:function(e,a,t){},333:function(e,a,t){},334:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(39),l=t.n(c),o=t(33),s=t(53),u=t(63),i=t(16),m=t(158),p=t.n(m),f=t(346),g=t(344),d=(t(192),function(e){var a=e.query,t=e.setQuery,n=e.applyQuery;return r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{inverted:!0,color:"teal",className:"Nav"},r.a.createElement(f.a.Item,{as:o.b,name:"home",to:"/",exact:!0}),r.a.createElement(f.a.Item,{as:o.b,name:"people",to:"/people",exact:!0}),r.a.createElement(i.b,{path:"/people"},r.a.createElement(f.a.Item,{position:"right"},r.a.createElement(g.a,{className:"Nav-Search icon",placeholder:"Search...",icon:"search",size:"mini",value:a,onChange:function(e){var a=e.target;t(a.value),n(a.value)}})))))}),h=t(347),b=(t(309),function(){return r.a.createElement("div",{className:"HomePage"},r.a.createElement(h.a,{size:"huge",content:"Home Page",color:"teal"}))}),E=t(81),v=t(177),P=t(4),y=t.n(P),j=t(342),O=t(42),S=(t(310),function(e){var a=e.person,t=e.tableHeaders,n=e.onSelect;return r.a.createElement(r.a.Fragment,null,t.map((function(e){var t=e.code;return r.a.createElement(j.a.Cell,{className:y()("TableCells",{TableCells_centenarians:a[t]>=65&&"age"===t,TableCells_aborigine:a.born<=1650&&"name"===t}),key:t,content:a[t],onClick:function(){return n(t,a)}})})))}),N=t(343),w=t(348),T=(t(311),[{key:1,text:"5 people",value:5},{key:2,text:"10 people",value:10},{key:3,text:"20 people",value:20},{key:4,text:"50 people",value:50}]),x=function(e){var a=e.page,t=e.perPage,n=e.totalPages,c=e.onSelectPage,l=e.onSelectPerPage;return r.a.createElement(j.a.HeaderCell,{colSpan:"10",className:"Pagination"},r.a.createElement(N.a,{placeholder:"Select people per page",floated:"left",selection:!0,name:"perPage",value:t,onChange:l,options:T,wrapSelection:!1,simple:!0}),r.a.createElement(w.a,{floated:"right",activePage:a,onPageChange:c,ellipsisItem:{content:r.a.createElement(O.a,{name:"ellipsis horizontal"}),icon:!0},prevItem:{content:r.a.createElement(O.a,{name:"angle left"}),disabled:1===a,icon:!0},firstItem:{content:r.a.createElement(O.a,{name:"angle double left"}),disabled:1===a,icon:!0},nextItem:{content:r.a.createElement(O.a,{name:"angle right"}),disabled:a===n,icon:!0},lastItem:{content:r.a.createElement(O.a,{name:"angle double right"}),disabled:a===n,icon:!0},totalPages:n}))},C=(t(329),r.a.memo((function(e){var a=e.path,t=e.page,n=e.perPage,c=e.totalPages,l=e.people,o=e.sortedBy,s=e.isSortedAsc,u=e.tableHeaders,i=e.onSortTable,m=e.onSelectPerson,p=e.onSelectPage,f=e.onSelectPerPage;return r.a.createElement(j.a,{celled:!0,className:"PeopleTable"},r.a.createElement(j.a.Header,null,r.a.createElement(j.a.Row,{className:"PeopleTable-TableRow"},u.map((function(e){var a=e.name,t=e.code;return r.a.createElement(j.a.HeaderCell,{key:t,className:"PeopleTable-HeaderCell Th",onClick:function(){return i(t)}},o===t&&r.a.createElement(O.a,{name:s?"arrow circle down":"arrow circle up",className:"PeopleTable-Icon",color:"teal"}),a)})))),r.a.createElement(j.a.Body,null,l.map((function(e){return r.a.createElement(j.a.Row,{key:e.id,warning:e.slug===a,className:y()({"PeopleTable-TableRow":!0,"PeopleTable-TableRow_male":"m"===e.sex,"PeopleTable-TableRow_female":"f"===e.sex})},r.a.createElement(S,{person:e,tableHeaders:u,onSelect:m}))}))),r.a.createElement(j.a.Footer,null,r.a.createElement(j.a.Row,{className:"PeopleTable-TableRow"},r.a.createElement(x,{page:t,perPage:n,totalPages:c,onSelectPage:p,onSelectPerPage:f}))))}))),k=(t(330),{id:"Id",name:"Name",sex:"Sex",age:"Age",born:"Born",died:"Died",century:"Century",father:"Father",mother:"Mother",children:"Children"}),I=r.a.memo((function(e){var a=e.people,t=e.historyPush,c=Object(i.h)(),l=Object(i.i)().personName,o=new URLSearchParams(c.search),s=Number(o.get("page"))||1,m=Number(o.get("perPage"))||5,p="desc"!==o.get("sortOrder"),f=o.get("sortBy")||"id",g=function(e){return 0===e.length?[{name:"There are no people",code:""}]:Object.entries(k).map((function(e){var a=Object(u.a)(e,2);return{code:a[0],name:a[1]}}))}(a),d=Object(n.useMemo)((function(){var e=function(e){switch(e){case"id":case"age":case"born":case"died":case"century":return function(a,t){return a[e]-t[e]};case"name":case"sex":case"father":case"mother":case"children":return function(a,t){return a[e].localeCompare(t[e])};default:return function(){return 0}}}(f),t=Object(v.a)(a).sort(e);return p||t.reverse(),t}),[a,f,p]),b=Object(n.useMemo)((function(){var e=Math.ceil(d.length/m);return a.length&&s>e&&t({page:"1",perPage:"5"},l),e}),[s,m,d,l,a,t]),P=(s-1)*m,y=Object(n.useMemo)((function(){return d.slice(P,P+m)}),[d,P,m]);l&&!a.some((function(e){return e.slug===l}))&&t({},"");return r.a.createElement("div",{className:"PeoplePage"},r.a.createElement(h.a,{size:"huge",content:"People table",color:"teal"}),r.a.createElement(C,{tableHeaders:g,people:y,sortedBy:f,isSortedAsc:p,totalPages:b,page:s,perPage:m,path:l,onSortTable:function(e){t(f!==e?{sortBy:e,sortOrder:"asc"}:{sortOrder:p?"desc":"asc"},l)},onSelectPerson:function(e,n){var r,c=null===(r=a.find((function(a){return a.name===n[e]})))||void 0===r?void 0:r.slug;"name"===e&&t({},n.slug),c&&("mother"===e||"father"===e)&&t({},c)},onSelectPage:function(e,a){var n=a.activePage;t({page:String(n)},l)},onSelectPerPage:function(e,a){var n=a.name,r=a.value,c=Object(E.a)({},n,String(r));t(c,l)}}))})),H=function(e){var a=e.message;return r.a.createElement("h2",null,a)},R=(t(331),function(e){var a=e.people,t=e.historyPush;return r.a.createElement("div",{className:"Main"},r.a.createElement(i.d,null,r.a.createElement(i.b,{path:"/people/:personName?",render:function(){return r.a.createElement(I,{people:a,historyPush:t})}}),r.a.createElement(i.b,{path:"/",exact:!0},r.a.createElement(b,null)),r.a.createElement(i.a,{from:"/home",to:"/"}),r.a.createElement(i.b,{path:"/error"},r.a.createElement(H,{message:"Not found"})),r.a.createElement(i.a,{from:"/*",to:"/error"})))}),M=t(64),B=t.n(M),A=t(120),_=function(){var e=Object(A.a)(B.a.mark((function e(a){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(a);case 2:return t=e.sent,e.abrupt("return",t.json());case 4:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),q=function(){var e=Object(A.a)(B.a.mark((function e(){var a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_("".concat("https://andreas-just.github.io/library-json").concat("/people/people-slug.json"));case 2:return a=e.sent,e.abrupt("return",a.map((function(e,t){return Object(s.a)(Object(s.a)({},e),{},{id:t+1,father:e.fatherName||"",mother:e.motherName||"",age:e.died-e.born,century:Math.ceil(e.died/100),children:a.filter((function(a){return a.fatherName===e.name||a.motherName===e.name})).map((function(e){return e.name})).join(", ")||""})})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),F=(t(333),function(){var e=Object(n.useState)([]),a=Object(u.a)(e,2),t=a[0],c=a[1],l=Object(n.useState)(""),o=Object(u.a)(l,2),m=o[0],f=o[1];Object(n.useEffect)((function(){q().then(c)}),[]);var g=Object(i.g)(),h=Object(i.h)(),b=Object(i.i)().personName,E=new URLSearchParams(h.search),v=E.get("query")||"",P=function(e,a){var t=Object(s.a)(Object(s.a)({},Object.fromEntries(E.entries())),e),n=a||"";for(var r in t)E.set(r,t[r]);g.push({pathname:"/people/".concat(n),search:E.toString()})};Object(n.useEffect)((function(){f(v)}),[v]);var y=Object(n.useCallback)(p()((function(e){""!==e?P({query:e},b):(E.delete("query"),P({},b))}),2e3),[]),j=v.toLowerCase(),O=Object(n.useMemo)((function(){return t.filter((function(e){return e.name.toLowerCase().includes(j)}))}),[j,t]);return t.length?r.a.createElement("div",{className:"App"},r.a.createElement(d,{query:m,setQuery:f,applyQuery:y}),r.a.createElement(R,{people:O,historyPush:P}),r.a.createElement("footer",{className:"App-Footer"},"\xa9Andreas Just 2020")):r.a.createElement("p",null,"Loading...")});l.a.render(r.a.createElement(o.a,null,r.a.createElement(F,null)),document.getElementById("root"))}},[[187,1,2]]]);
//# sourceMappingURL=main.3dc0f3f1.chunk.js.map