(this["webpackJsonpreact_people-table"]=this["webpackJsonpreact_people-table"]||[]).push([[0],{155:function(e,t,a){e.exports=a(302)},160:function(e,t,a){},292:function(e,t,a){},293:function(e,t,a){},294:function(e,t,a){},297:function(e,t,a){},299:function(e,t,a){},300:function(e,t,a){},301:function(e,t,a){},302:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(32),l=a.n(c),o=a(31),u=a(14),s=a(314),i=a(312),m=(a(160),function(){var e=Object(u.g)(),t=Object(u.h)(),a=new URLSearchParams(t.search),n=a.get("query")||"";return r.a.createElement(r.a.Fragment,null,r.a.createElement(s.a,{inverted:!0,color:"teal",className:"Nav"},r.a.createElement(s.a.Item,{as:o.b,name:"home",to:"/",exact:!0}),r.a.createElement(s.a.Item,{as:o.b,name:"people",to:"/people",exact:!0}),r.a.createElement(u.b,{path:"/people"},r.a.createElement(s.a.Item,{position:"right"},r.a.createElement(i.a,{className:"Nav-Search icon",placeholder:"Search...",icon:"search",size:"mini",value:n,onChange:function(t){var n,r;n="query",(r=t.target.value)?a.set(n,r):a.delete(n),e.push({search:a.toString()})}})))))}),p=a(315),f=(a(292),function(){return r.a.createElement("div",{className:"HomePage"},r.a.createElement(p.a,{size:"huge",content:"Home Page",color:"teal"}))}),h=a(101),g=a(42),b=a(102),d=a(3),E=a.n(d),v=a(311),j=(a(293),function(e){var t=e.person,a=e.tableHeaders,n=e.onSelect;return r.a.createElement(r.a.Fragment,null,a.map((function(e){var a=e.code;return r.a.createElement(v.a.Cell,{className:E()("TableCells",{TableCells_centenarians:t[a]>=65&&"age"===a,TableCells_aborigine:t.born<=1650&&"name"===a}),key:a,content:t[a],onClick:function(){return n(a,t)}})})))}),P=a(316),N=a(35),O=(a(294),function(e){var t=e.page,a=e.totalPages,n=e.onSelectPage;return r.a.createElement(v.a.HeaderCell,{colSpan:"10",className:"Pagination"},r.a.createElement(P.a,{defaultActivePage:t,onPageChange:n,ellipsisItem:{content:r.a.createElement(N.a,{name:"ellipsis horizontal"}),icon:!0},firstItem:{content:r.a.createElement(N.a,{name:"angle double left"}),icon:!0},lastItem:{content:r.a.createElement(N.a,{name:"angle double right"}),icon:!0},prevItem:{content:r.a.createElement(N.a,{name:"angle left"}),icon:!0},nextItem:{content:r.a.createElement(N.a,{name:"angle right"}),icon:!0},totalPages:a}))}),S=(a(297),function(e){var t=e.path,a=e.page,n=e.totalPages,c=e.people,l=e.tableHeaders,o=e.sortTable,u=e.onSelectPerson,s=e.onSelectPage;return r.a.createElement(v.a,{celled:!0,className:"PeopleTable"},r.a.createElement(v.a.Header,null,r.a.createElement(v.a.Row,null,l.map((function(e){var t=e.name,a=e.code;return r.a.createElement(v.a.HeaderCell,{key:t,content:t,className:"sort-button",onClick:function(){return o(a)}})})))),r.a.createElement(v.a.Body,null,c.map((function(e){return r.a.createElement(v.a.Row,{key:e.id,warning:e.slug===t,className:E()("PeopleTable-TableRow",{"PeopleTable-TableRow_male":"m"===e.sex,"PeopleTable-TableRow_female":"f"===e.sex})},r.a.createElement(j,{person:e,tableHeaders:l,onSelect:u}))}))),r.a.createElement(v.a.Footer,null,r.a.createElement(v.a.Row,null,r.a.createElement(O,{page:a,totalPages:n,onSelectPage:s}))))}),w=a(53),y=a.n(w),x=a(100),C=function(){var e=Object(x.a)(y.a.mark((function e(t){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return a=e.sent,e.abrupt("return",a.json());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(x.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C("".concat("https://andreas-just.github.io/library-json").concat("/people/people-slug.json"));case 2:return t=e.sent,e.abrupt("return",t.map((function(e,a){return Object(g.a)(Object(g.a)({},e),{},{id:a+1,father:e.fatherName||"",mother:e.motherName||"",age:e.died-e.born,century:Math.ceil(e.died/100),children:t.filter((function(t){return t.fatherName===e.name||t.motherName===e.name})).map((function(e){return e.name})).join(", ")||""})})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=(a(299),{id:"Id",name:"Name",sex:"Sex",age:"Age",born:"Born",died:"Died",century:"Century",father:"Father",mother:"Mother",children:"Children"}),I=function(e){switch(e){case"id":case"age":case"born":case"died":case"century":return function(t,a){return t[e]-a[e]};case"name":case"sex":case"father":case"mother":case"children":return function(t,a){return t[e].localeCompare(a[e])};default:return function(){return 0}}},H=function(){var e=Object(n.useState)([]),t=Object(b.a)(e,2),a=t[0],c=t[1],l=Object(u.g)(),o=Object(u.h)(),s=Object(u.i)().personName,i=new URLSearchParams(o.search),m=i.get("query")||"",f=Number(i.get("page"))||1,d=Number(i.get("perPage"))||40,E=i.get("sortBy")||"id",v=function(e){return 0===e.length?[{name:"There are no people",code:""}]:Object.entries(k).map((function(e){var t=Object(b.a)(e,2);return{code:t[0],name:t[1]}}))}(a),j=(f-1)*d,P=Math.round(a.length/d),N=a.filter((function(e){return new RegExp(m,"i").test(e.name)})).slice(j,j+d);Object(n.useEffect)((function(){T().then((function(e){c(e.sort(I(E)))}))}),[]),Object(n.useEffect)((function(){c((function(e){return e.sort(I(E))}))}),[E]);var O=Object(n.useCallback)((function(e,t){var a=Object(g.a)(Object(g.a)({},Object.fromEntries(i.entries())),e),n=t||"";for(var r in a)i.set(r,a[r]);l.push({pathname:"/people/".concat(n),search:i.toString()})}),[l,i]),w=Object(n.useCallback)((function(e,t){var n,r=null===(n=a.find((function(a){return a.name===t[e]})))||void 0===n?void 0:n.slug;"name"===e&&O({},t.slug),r&&("mother"===e||"father"===e)&&O({},r)}),[a,O]);if(!a.length)return r.a.createElement("p",null,"Loading...");s&&!a.some((function(e){return e.slug===s}))&&O({},"");return r.a.createElement("div",{className:"PeoplePage"},r.a.createElement(p.a,{size:"huge",content:"People table",color:"teal"}),r.a.createElement(S,{people:N,tableHeaders:v,sortTable:function(e){var t=I(e);E!==e?(c(Object(h.a)(a).sort(t)),O({sortBy:e},s)):c(Object(h.a)(a).reverse())},onSelectPerson:w,onSelectPage:function(e,t){var a=t.activePage;O({page:String(a)},s)},path:s,page:f,totalPages:P}))},R=function(e){var t=e.message;return r.a.createElement("h2",null,t)},_=(a(300),function(){return r.a.createElement("div",{className:"Main"},r.a.createElement(u.d,null,r.a.createElement(u.b,{path:"/people/:personName?",component:H}),r.a.createElement(u.b,{path:"/",exact:!0},r.a.createElement(f,null)),r.a.createElement(u.a,{from:"/home",to:"/"}),r.a.createElement(u.b,{path:"/error"},r.a.createElement(R,{message:"Not found"})),r.a.createElement(u.a,{from:"/*",to:"/error"})))}),A=(a(301),function(){return r.a.createElement("div",{className:"App"},r.a.createElement("header",null,r.a.createElement(m,null)),r.a.createElement(_,null),r.a.createElement("footer",{className:"App-Footer"},"\xa9Andreas Just 2020"))});l.a.render(r.a.createElement(o.a,null,r.a.createElement(A,null)),document.getElementById("root"))}},[[155,1,2]]]);
//# sourceMappingURL=main.7d9a7146.chunk.js.map